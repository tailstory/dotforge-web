import { x, l as l$1, t as t$1, k as k$1 } from './preact.module.DwQvwsCh.js';
import { T, d as d$1 } from './hooks.module.W51YuLhF.js';

var i=Symbol.for("preact-signals");function t(){if(!(s>1)){var i,t=false;while(void 0!==h$1){var r=h$1;h$1=void 0;f++;while(void 0!==r){var o=r.o;r.o=void 0;r.f&=-3;if(!(8&r.f)&&c(r))try{r.c();}catch(r){if(!t){i=r;t=true;}}r=o;}}f=0;s--;if(t)throw i}else s--;}function r(i){if(s>0)return i();s++;try{return i()}finally{t();}}var o=void 0;function n(i){var t=o;o=void 0;try{return i()}finally{o=t;}}var h$1=void 0,s=0,f=0,v=0;function e(i){if(void 0!==o){var t=i.n;if(void 0===t||t.t!==o){t={i:0,S:i,p:o.s,n:void 0,t:o,e:void 0,x:void 0,r:t};if(void 0!==o.s)o.s.n=t;o.s=t;i.n=t;if(32&o.f)i.S(t);return t}else if(-1===t.i){t.i=0;if(void 0!==t.n){t.n.p=t.p;if(void 0!==t.p)t.p.n=t.n;t.p=o.s;t.n=void 0;o.s.n=t;o.s=t;}return t}}}function u(i,t){this.v=i;this.i=0;this.n=void 0;this.t=void 0;this.W=null==t?void 0:t.watched;this.Z=null==t?void 0:t.unwatched;this.name=null==t?void 0:t.name;}u.prototype.brand=i;u.prototype.h=function(){return  true};u.prototype.S=function(i){var t=this,r=this.t;if(r!==i&&void 0===i.e){i.x=r;this.t=i;if(void 0!==r)r.e=i;else n(function(){var i;null==(i=t.W)||i.call(t);});}};u.prototype.U=function(i){var t=this;if(void 0!==this.t){var r=i.e,o=i.x;if(void 0!==r){r.x=o;i.e=void 0;}if(void 0!==o){o.e=r;i.x=void 0;}if(i===this.t){this.t=o;if(void 0===o)n(function(){var i;null==(i=t.Z)||i.call(t);});}}};u.prototype.subscribe=function(i){var t=this;return E(function(){var r=t.value,n=o;o=void 0;try{i(r);}finally{o=n;}},{name:"sub"})};u.prototype.valueOf=function(){return this.value};u.prototype.toString=function(){return this.value+""};u.prototype.toJSON=function(){return this.value};u.prototype.peek=function(){var i=o;o=void 0;try{return this.value}finally{o=i;}};Object.defineProperty(u.prototype,"value",{get:function(){var i=e(this);if(void 0!==i)i.i=this.i;return this.v},set:function(i){if(i!==this.v){if(f>100)throw new Error("Cycle detected");this.v=i;this.i++;v++;s++;try{for(var r=this.t;void 0!==r;r=r.x)r.t.N();}finally{t();}}}});function d(i,t){return new u(i,t)}function c(i){for(var t=i.s;void 0!==t;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return  true;return  false}function a(i){for(var t=i.s;void 0!==t;t=t.n){var r=t.S.n;if(void 0!==r)t.r=r;t.S.n=t;t.i=-1;if(void 0===t.n){i.s=t;break}}}function l(i){var t=i.s,r=void 0;while(void 0!==t){var o=t.p;if(-1===t.i){t.S.U(t);if(void 0!==o)o.n=t.n;if(void 0!==t.n)t.n.p=o;}else r=t;t.S.n=t.r;if(void 0!==t.r)t.r=void 0;t=o;}i.s=r;}function y$1(i,t){u.call(this,void 0);this.x=i;this.s=void 0;this.g=v-1;this.f=4;this.W=null==t?void 0:t.watched;this.Z=null==t?void 0:t.unwatched;this.name=null==t?void 0:t.name;}y$1.prototype=new u;y$1.prototype.h=function(){this.f&=-3;if(1&this.f)return  false;if(32==(36&this.f))return  true;this.f&=-5;if(this.g===v)return  true;this.g=v;this.f|=1;if(this.i>0&&!c(this)){this.f&=-2;return  true}var i=o;try{a(this);o=this;var t=this.x();if(16&this.f||this.v!==t||0===this.i){this.v=t;this.f&=-17;this.i++;}}catch(i){this.v=i;this.f|=16;this.i++;}o=i;l(this);this.f&=-2;return  true};y$1.prototype.S=function(i){if(void 0===this.t){this.f|=36;for(var t=this.s;void 0!==t;t=t.n)t.S.S(t);}u.prototype.S.call(this,i);};y$1.prototype.U=function(i){if(void 0!==this.t){u.prototype.U.call(this,i);if(void 0===this.t){this.f&=-33;for(var t=this.s;void 0!==t;t=t.n)t.S.U(t);}}};y$1.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var i=this.t;void 0!==i;i=i.x)i.t.N();}};Object.defineProperty(y$1.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var i=e(this);this.h();if(void 0!==i)i.i=this.i;if(16&this.f)throw this.v;return this.v}});function w(i,t){return new y$1(i,t)}function _$1(i){var r=i.u;i.u=void 0;if("function"==typeof r){s++;var n=o;o=void 0;try{r();}catch(t){i.f&=-2;i.f|=8;b$1(i);throw t}finally{o=n;t();}}}function b$1(i){for(var t=i.s;void 0!==t;t=t.n)t.S.U(t);i.x=void 0;i.s=void 0;_$1(i);}function g$1(i){if(o!==this)throw new Error("Out-of-order effect");l(this);o=i;this.f&=-2;if(8&this.f)b$1(this);t();}function p$1(i,t){this.x=i;this.u=void 0;this.s=void 0;this.o=void 0;this.f=32;this.name=null==t?void 0:t.name;}p$1.prototype.c=function(){var i=this.S();try{if(8&this.f)return;if(void 0===this.x)return;var t=this.x();if("function"==typeof t)this.u=t;}finally{i();}};p$1.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1;this.f&=-9;_$1(this);a(this);s++;var i=o;o=this;return g$1.bind(this,i)};p$1.prototype.N=function(){if(!(2&this.f)){this.f|=2;this.o=h$1;h$1=this;}};p$1.prototype.d=function(){this.f|=8;if(!(1&this.f))b$1(this);};p$1.prototype.dispose=function(){this.d();};function E(i,t){var r=new p$1(i,t);try{r.c();}catch(i){r.d();throw i}var o=r.d.bind(r);o[Symbol.dispose]=o;return o}

var h,p,m="undefined"!=typeof window&&!!window.__PREACT_SIGNALS_DEVTOOLS__,_=[];E(function(){h=this.N;})();function g(i,t){l$1[i]=t.bind(null,l$1[i]||function(){});}function y(i){if(p)p();p=i&&i.S();}function b(i){var n=this,r=i.data,o=useSignal(r);o.value=r;var e=T(function(){var i=n,r=n.__v;while(r=r.__)if(r.__c){r.__c.__$f|=4;break}var f=w(function(){var i=o.value.value;return 0===i?0:true===i?"":i||""}),e=w(function(){return !Array.isArray(f.value)&&!t$1(f.value)}),u=E(function(){this.N=M;if(e.value){var n=f.value;if(i.__v&&i.__v.__e&&3===i.__v.__e.nodeType)i.__v.__e.data=n;}}),c=n.__$u.d;n.__$u.d=function(){u();c.call(this);};return [e,f]},[]),u=e[0],c=e[1];return u.value?c.peek():c.value}b.displayName="ReactiveTextNode";Object.defineProperties(u.prototype,{constructor:{configurable:true,value:void 0},type:{configurable:true,value:b},props:{configurable:true,get:function(){return {data:this}}},__b:{configurable:true,value:1}});g("__b",function(i,n){if(m&&"function"==typeof n.type)window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();if("string"==typeof n.type){var t,r=n.props;for(var f in r)if("children"!==f){var o=r[f];if(o instanceof u){if(!t)n.__np=t={};t[f]=o;r[f]=o.peek();}}}i(n);});g("__r",function(i,n){if(m&&"function"==typeof n.type)window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(n);if(n.type!==k$1){y();var t,f=n.__c;if(f){f.__$f&=-2;if(void 0===(t=f.__$u))f.__$u=t=function(i){var n;E(function(){n=this;});n.c=function(){f.__$f|=1;f.setState({});};return n}();}y(t);}i(n);});g("__e",function(i,n,t,r){if(m)window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();y();i(n,t,r);});g("diffed",function(i,n){if(m&&"function"==typeof n.type)window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent();y();var t;if("string"==typeof n.type&&(t=n.__e)){var r=n.__np,f=n.props;if(r){var o=t.U;if(o)for(var e in o){var u=o[e];if(void 0!==u&&!(e in r)){u.d();o[e]=void 0;}}else {o={};t.U=o;}for(var a in r){var c=o[a],v=r[a];if(void 0===c){c=k(t,a,v,f);o[a]=c;}else c.o(v,f);}}}i(n);});function k(i,n,t,r){var f=n in i&&void 0===i.ownerSVGElement,o=d(t);return {o:function(i,n){o.value=i;r=n;},d:E(function(){this.N=M;var t=o.value.value;if(r[n]!==t){r[n]=t;if(f)i[n]=t;else if(null!=t&&(false!==t||"-"===n[4]))i.setAttribute(n,t);else i.removeAttribute(n);}})}}g("unmount",function(i,n){if("string"==typeof n.type){var t=n.__e;if(t){var r=t.U;if(r){t.U=void 0;for(var f in r){var o=r[f];if(o)o.d();}}}}else {var e=n.__c;if(e){var u=e.__$u;if(u){e.__$u=void 0;u.d();}}}i(n);});g("__h",function(i,n,t,r){if(r<3||9===r)n.__$f|=2;i(n,t,r);});x.prototype.shouldComponentUpdate=function(i,n){var t=this.__$u,r=t&&void 0!==t.s;for(var f in n)return  true;if(this.__f||"boolean"==typeof this.u&&true===this.u){var o=2&this.__$f;if(!(r||o||4&this.__$f))return  true;if(1&this.__$f)return  true}else {if(!(r||4&this.__$f))return  true;if(3&this.__$f)return  true}for(var e in i)if("__source"!==e&&i[e]!==this.props[e])return  true;for(var u in this.props)if(!(u in i))return  true;return  false};function useSignal(i,n){return d$1(function(){return d(i,n)})[0]}var A=function(i){queueMicrotask(function(){queueMicrotask(i);});};function F(){r(function(){var i;while(i=_.shift())h.call(i);});}function M(){if(1===_.push(this))(l$1.requestAnimationFrame||A)(F);}

export { u as Signal, r as batch, w as computed, E as effect, d as signal, n as untracked, useSignal };
